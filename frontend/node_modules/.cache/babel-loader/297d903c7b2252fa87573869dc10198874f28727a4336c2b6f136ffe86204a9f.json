{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jascha\\\\Documents\\\\VS Code\\\\Schulden-Manager\\\\frontend\\\\src\\\\pages\\\\PersonDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PersonDetails() {\n  _s();\n  const currentUser = \"Jascha\";\n  const {\n    name\n  } = useParams();\n  const [debts, setDebts] = useState([]);\n  useEffect(() => {\n    const fetchDebts = async () => {\n      const res = await fetch(`/api/debts?user=${currentUser}`);\n      const data = await res.json();\n\n      // Nur Einträge mit dieser Person\n      const filtered = data.filter(d => d.creditor === name && d.debtor === currentUser || d.debtor === name && d.creditor === currentUser);\n      setDebts(filtered);\n    };\n    fetchDebts();\n  }, [name]);\n  const handleMarkAsPaid = async id => {\n    await fetch(`/api/debts/${id}/pay`, {\n      method: \"PATCH\"\n    });\n    const updated = debts.map(d => d._id === id ? {\n      ...d,\n      status: \"paid\"\n    } : d);\n    setDebts(updated);\n  };\n  const getLabel = debt => {\n    if (debt.creditor === currentUser) {\n      return `Du bekommst`;\n    } else {\n      return `Du schuldest`;\n    }\n  };\n  const getCounterparty = debt => {\n    return debt.creditor === currentUser ? debt.debtor : debt.creditor;\n  };\n\n  // Saldo berechnen\n  const total = debts.reduce((sum, d) => {\n    const val = d.amount;\n    if (d.status === \"paid\") return sum; // Ignorieren\n    if (d.creditor === currentUser) return sum + val; // Du bekommst\n    else return sum - val; // Du schuldest\n  }, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Details zu \", name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Saldo:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), \" \", total.toFixed(2), \" CHF\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), debts.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Keine Eintr\\xE4ge gefunden.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: debts.map(debt => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [getLabel(debt), \" \", debt.amount.toFixed(2), \" CHF f\\xFCr \", debt.description, \" \", \"am \", new Date(debt.date).toLocaleDateString(\"de-CH\"), debt.status === \"paid\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \" \\u2013 bezahlt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleMarkAsPaid(debt._id),\n          children: \"als bezahlt markieren\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)]\n      }, debt._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(PersonDetails, \"CzNfSL0QziYf8iGMa/BcNNQrF48=\", false, function () {\n  return [useParams];\n});\n_c = PersonDetails;\nexport default PersonDetails;\nvar _c;\n$RefreshReg$(_c, \"PersonDetails\");","map":{"version":3,"names":["React","useEffect","useState","useParams","jsxDEV","_jsxDEV","PersonDetails","_s","currentUser","name","debts","setDebts","fetchDebts","res","fetch","data","json","filtered","filter","d","creditor","debtor","handleMarkAsPaid","id","method","updated","map","_id","status","getLabel","debt","getCounterparty","total","reduce","sum","val","amount","children","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","length","description","Date","date","toLocaleDateString","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Jascha/Documents/VS Code/Schulden-Manager/frontend/src/pages/PersonDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nfunction PersonDetails() {\r\n  const currentUser = \"Jascha\";\r\n  const { name } = useParams();\r\n  const [debts, setDebts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDebts = async () => {\r\n      const res = await fetch(`/api/debts?user=${currentUser}`);\r\n      const data = await res.json();\r\n\r\n      // Nur Einträge mit dieser Person\r\n      const filtered = data.filter(\r\n        (d) =>\r\n          (d.creditor === name && d.debtor === currentUser) ||\r\n          (d.debtor === name && d.creditor === currentUser)\r\n      );\r\n\r\n      setDebts(filtered);\r\n    };\r\n\r\n    fetchDebts();\r\n  }, [name]);\r\n\r\n  const handleMarkAsPaid = async (id) => {\r\n    await fetch(`/api/debts/${id}/pay`, {\r\n      method: \"PATCH\",\r\n    });\r\n    const updated = debts.map((d) =>\r\n      d._id === id ? { ...d, status: \"paid\" } : d\r\n    );\r\n    setDebts(updated);\r\n  };\r\n\r\n  const getLabel = (debt) => {\r\n    if (debt.creditor === currentUser) {\r\n      return `Du bekommst`;\r\n    } else {\r\n      return `Du schuldest`;\r\n    }\r\n  };\r\n\r\n  const getCounterparty = (debt) => {\r\n    return debt.creditor === currentUser ? debt.debtor : debt.creditor;\r\n  };\r\n\r\n  // Saldo berechnen\r\n  const total = debts.reduce((sum, d) => {\r\n    const val = d.amount;\r\n    if (d.status === \"paid\") return sum; // Ignorieren\r\n    if (d.creditor === currentUser) return sum + val; // Du bekommst\r\n    else return sum - val; // Du schuldest\r\n  }, 0);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Details zu {name}</h2>\r\n      <p>\r\n        <strong>Saldo:</strong> {total.toFixed(2)} CHF\r\n      </p>\r\n      {debts.length === 0 && <p>Keine Einträge gefunden.</p>}\r\n      <ul>\r\n        {debts.map((debt) => (\r\n          <li key={debt._id}>\r\n            {getLabel(debt)} {debt.amount.toFixed(2)} CHF für {debt.description}{\" \"}\r\n            am {new Date(debt.date).toLocaleDateString(\"de-CH\")}\r\n            {debt.status === \"paid\" ? (\r\n              <span> – bezahlt</span>\r\n            ) : (\r\n              <button onClick={() => handleMarkAsPaid(debt._id)}>\r\n                als bezahlt markieren\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}