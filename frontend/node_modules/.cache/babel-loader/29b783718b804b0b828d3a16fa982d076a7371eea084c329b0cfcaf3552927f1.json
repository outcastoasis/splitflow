{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jascha\\\\Documents\\\\VS Code\\\\Schulden-Manager\\\\frontend\\\\src\\\\pages\\\\PersonDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PersonDetails() {\n  _s();\n  const currentUser = \"Jascha\";\n  const {\n    name\n  } = useParams();\n  const [debts, setDebts] = useState([]);\n  useEffect(() => {\n    const fetchDebts = async () => {\n      const res = await fetch(`/api/debts?user=${currentUser}`);\n      const data = await res.json();\n\n      // Nur Einträge mit der gewählten Person\n      const filtered = data.filter(d => d.creditor === name || d.debtor === name);\n      setDebts(filtered);\n    };\n    fetchDebts();\n  }, [name]);\n  const handleMarkAsPaid = async id => {\n    await fetch(`/api/debts/${id}/pay`, {\n      method: \"PATCH\"\n    });\n    const updated = debts.map(d => d._id === id ? {\n      ...d,\n      status: \"paid\"\n    } : d);\n    setDebts(updated);\n  };\n  const getLabel = debt => {\n    if (debt.creditor === currentUser) {\n      return `${debt.debtor} schuldet dir`;\n    } else {\n      return `Du schuldest ${debt.creditor}`;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Details zu \", name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), debts.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Keine Eintr\\xE4ge gefunden.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: debts.map(debt => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [getLabel(debt), \" \", debt.amount.toFixed(2), \" CHF f\\xFCr \", debt.description, \" \", \"am \", new Date(debt.date).toLocaleDateString(\"de-CH\"), debt.status === \"paid\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \" \\u2013 bezahlt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleMarkAsPaid(debt._id),\n          children: \"als bezahlt markieren\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this)]\n      }, debt._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(PersonDetails, \"CzNfSL0QziYf8iGMa/BcNNQrF48=\", false, function () {\n  return [useParams];\n});\n_c = PersonDetails;\nexport default PersonDetails;\nvar _c;\n$RefreshReg$(_c, \"PersonDetails\");","map":{"version":3,"names":["React","useEffect","useState","useParams","jsxDEV","_jsxDEV","PersonDetails","_s","currentUser","name","debts","setDebts","fetchDebts","res","fetch","data","json","filtered","filter","d","creditor","debtor","handleMarkAsPaid","id","method","updated","map","_id","status","getLabel","debt","children","fileName","_jsxFileName","lineNumber","columnNumber","length","amount","toFixed","description","Date","date","toLocaleDateString","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Jascha/Documents/VS Code/Schulden-Manager/frontend/src/pages/PersonDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nfunction PersonDetails() {\r\n  const currentUser = \"Jascha\";\r\n  const { name } = useParams();\r\n  const [debts, setDebts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchDebts = async () => {\r\n      const res = await fetch(`/api/debts?user=${currentUser}`);\r\n      const data = await res.json();\r\n\r\n      // Nur Einträge mit der gewählten Person\r\n      const filtered = data.filter(\r\n        (d) => d.creditor === name || d.debtor === name\r\n      );\r\n\r\n      setDebts(filtered);\r\n    };\r\n\r\n    fetchDebts();\r\n  }, [name]);\r\n\r\n  const handleMarkAsPaid = async (id) => {\r\n    await fetch(`/api/debts/${id}/pay`, {\r\n      method: \"PATCH\",\r\n    });\r\n    const updated = debts.map((d) =>\r\n      d._id === id ? { ...d, status: \"paid\" } : d\r\n    );\r\n    setDebts(updated);\r\n  };\r\n\r\n  const getLabel = (debt) => {\r\n    if (debt.creditor === currentUser) {\r\n      return `${debt.debtor} schuldet dir`;\r\n    } else {\r\n      return `Du schuldest ${debt.creditor}`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Details zu {name}</h2>\r\n      {debts.length === 0 && <p>Keine Einträge gefunden.</p>}\r\n      <ul>\r\n        {debts.map((debt) => (\r\n          <li key={debt._id}>\r\n            {getLabel(debt)} {debt.amount.toFixed(2)} CHF für {debt.description}{\" \"}\r\n            am {new Date(debt.date).toLocaleDateString(\"de-CH\")}\r\n            {debt.status === \"paid\" ? (\r\n              <span> – bezahlt</span>\r\n            ) : (\r\n              <button onClick={() => handleMarkAsPaid(debt._id)}>\r\n                als bezahlt markieren\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}